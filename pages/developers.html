<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Developers — Fae | Saorsa Labs</title>
  <meta name="description" content="Fae developer documentation. Architecture overview, build instructions, contribution guide, and JSON protocol reference.">
  <link rel="stylesheet" href="../css/design-system.css">
  <link rel="stylesheet" href="../css/pages.css">
</head>
<body>

  <!-- Navigation -->
  <nav class="nav" role="navigation">
    <div class="nav__inner">
      <a href="../index.html" class="nav__logo">
        <img src="../img/fae-logo.png" alt="" class="nav__logo-orb" aria-hidden="true">
        <span>Fae</span>
      </a>
      <ul class="nav__links">
        <li><a href="features.html">Features</a></li>
        <li><a href="privacy.html">Privacy</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="developers.html">Developers</a></li>
        <li><a href="../index.html#waitlist" class="nav__cta">Get Early Access</a></li>
      </ul>
      <button class="nav__toggle" aria-label="Toggle navigation" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <!-- Page Header -->
  <header class="page-header">
    <div class="page-header__bg"></div>
    <div class="container">
      <div class="badge animate-in">
        <span class="badge__dot"></span>
        AGPL-3.0
      </div>
      <h1 class="animate-in animate-in--delay-1">
        Developer <span class="text-gradient">Documentation</span>
      </h1>
      <p class="lead animate-in animate-in--delay-2">
        Fae is open source. Build with it, contribute to it, or connect your own frontend.
      </p>
    </div>
  </header>

  <!-- Architecture Overview -->
  <section class="section--sm">
    <div class="container container--narrow">
      <div class="docs-section" data-animate>
        <h3>Architecture</h3>
        <p style="color: var(--text-secondary); line-height: 1.75; margin-bottom: var(--space-lg);">
          Fae is built as a Rust core library (<code style="color:var(--warm-gold);">libfae</code>) with platform-specific native shells. On macOS, the Swift shell links <code style="color:var(--warm-gold);">libfae.a</code> directly via C ABI — the Rust core runs in-process with zero IPC overhead. On Linux and Windows, <code style="color:var(--warm-gold);">fae-host</code> exposes the full core via JSON protocol over stdin/stdout.
        </p>

        <div class="code-block">
          <div class="code-block__label">Architecture Overview</div>
<pre>┌──────────────────────────────────────────────────────────────┐
│                     Platform Shells                          │
│                                                              │
│  macOS (arm64)          Linux / Windows                      │
│  ┌────────────────┐     ┌────────────────────┐               │
│  │ Swift native   │     │ fae-host binary     │               │
│  │ app (Fae.app)  │     │ (headless bridge)   │               │
│  │                │     │                     │               │
│  │ SwiftUI + orb  │     │ JSON stdin/stdout   │               │
│  │ animation,     │     │ IPC over Unix sock  │               │
│  │ conversation   │     │ or named pipe       │               │
│  │ WebView,       │     │                     │               │
│  │ settings UI    │     │ Connect any UI:     │               │
│  └───────┬────────┘     │ web, terminal, etc. │               │
│          │ C ABI        └──────────┬──────────┘               │
│          │ (in-process)            │ JSON protocol            │
│          ▼                         ▼                          │
│  ┌───────────────────────────────────────────────────────┐   │
│  │                   libfae (Rust core)                   │   │
│  │                                                       │   │
│  │  Mic -> AEC -> VAD -> STT -> LLM Agent -> TTS -> Spk │   │
│  │              │                    │                    │   │
│  │              │                    ├── Memory           │   │
│  │              │                    ├── Intelligence     │   │
│  │              │                    ├── Scheduler        │   │
│  │              │                    └── Tools/Skills     │   │
│  │              │                                        │   │
│  │              └── Vision (Qwen3-VL, camera input)      │   │
│  └───────────────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────────┘</pre>
        </div>
      </div>

      <!-- Voice Pipeline -->
      <div class="docs-section" data-animate>
        <h3>Voice Pipeline</h3>
        <p style="color: var(--text-secondary); line-height: 1.75; margin-bottom: var(--space-lg);">
          The voice pipeline runs entirely on-device with no cloud dependencies:
        </p>
        <div class="arch-pipeline">
          <div class="arch-pipeline__label">Audio Flow</div>
          <div class="arch-pipeline__flow">
            <span class="arch-pipeline__node">Microphone (16kHz)</span>
            <span class="arch-pipeline__arrow">&rarr;</span>
            <span class="arch-pipeline__node">AEC</span>
            <span class="arch-pipeline__arrow">&rarr;</span>
            <span class="arch-pipeline__node">VAD</span>
            <span class="arch-pipeline__arrow">&rarr;</span>
            <span class="arch-pipeline__node">STT (Parakeet ONNX)</span>
            <span class="arch-pipeline__arrow">&rarr;</span>
            <span class="arch-pipeline__node arch-pipeline__node--accent">LLM Agent</span>
            <span class="arch-pipeline__arrow">&rarr;</span>
            <span class="arch-pipeline__node">TTS (Kokoro-82M)</span>
            <span class="arch-pipeline__arrow">&rarr;</span>
            <span class="arch-pipeline__node">Speaker</span>
          </div>
        </div>
      </div>

      <!-- LLM Backends -->
      <div class="docs-section" data-animate>
        <h3>LLM Backends</h3>
        <p style="color: var(--text-secondary); line-height: 1.75; margin-bottom: var(--space-lg);">
          Fae always runs through the internal agent loop (tool calling + sandboxing). The backend setting selects the LLM brain:
        </p>
        <table class="mode-table">
          <thead>
            <tr><th>Backend</th><th>Config</th><th>Notes</th></tr>
          </thead>
          <tbody>
            <tr>
              <td>local</td>
              <td style="color: var(--text-secondary);"><code style="color:var(--warm-gold);">backend = "local"</code></td>
              <td style="color: var(--text-secondary);">On-device via mistral.rs (Metal on Mac, CUDA on Linux)</td>
            </tr>
            <tr>
              <td>agent</td>
              <td style="color: var(--text-secondary);"><code style="color:var(--warm-gold);">backend = "agent"</code></td>
              <td style="color: var(--text-secondary);">Auto-select (local when no creds, API otherwise)</td>
            </tr>
          </tbody>
        </table>

        <p style="color: var(--text-secondary); line-height: 1.75; margin-top: var(--space-lg);">
          Local model selection is automatic based on system RAM: Qwen3-VL-8B-Instruct for 24GB+ systems, Qwen3-VL-4B-Instruct for lighter hardware. Both support vision and are loaded with ISQ Q4K quantisation.
        </p>
      </div>

      <div class="divider"></div>

      <!-- Build Instructions -->
      <div class="docs-section" id="contributing" data-animate>
        <h3>Build &amp; Develop</h3>
        <p style="color: var(--text-secondary); line-height: 1.75; margin-bottom: var(--space-lg);">
          Fae uses <code style="color:var(--warm-gold);">just</code> (a command runner) for development tasks:
        </p>

        <div class="code-block">
          <div class="code-block__label">Developer Commands</div>
<pre>just run              # Run headless host bridge (IPC mode)
just run-native-swift # Run native macOS SwiftUI app
just build            # Build Rust core library + binaries
just build-staticlib  # Build libfae.a for Swift embedding
just test             # Run tests
just lint             # Run clippy (zero warnings)
just fmt              # Format code
just check            # Full CI validation</pre>
        </div>
      </div>

      <!-- Host Protocol -->
      <div class="docs-section" data-animate>
        <h3>Host Protocol</h3>
        <p style="color: var(--text-secondary); line-height: 1.75; margin-bottom: var(--space-lg);">
          The <code style="color:var(--warm-gold);">fae-host</code> binary communicates via versioned JSON envelopes over stdin/stdout. Commands flow from frontend to backend; responses and events flow back.
        </p>

        <div class="code-block">
          <div class="code-block__label">Command Envelope (Frontend → Backend)</div>
<pre>{
  "v": 1,
  "request_id": "abc-123",
  "command": "runtime.start",
  "payload": {}
}</pre>
        </div>

        <div class="code-block">
          <div class="code-block__label">Response Envelope (Backend → Frontend)</div>
<pre>{
  "v": 1,
  "request_id": "abc-123",
  "ok": true,
  "payload": { "status": "running" },
  "error": null
}</pre>
        </div>

        <p style="color: var(--text-secondary); line-height: 1.75; margin-top: var(--space-lg);">
          Available commands include <code style="color:var(--warm-gold);">host.ping</code>, <code style="color:var(--warm-gold);">runtime.start/stop/status</code>, <code style="color:var(--warm-gold);">conversation.inject_text</code>, <code style="color:var(--warm-gold);">scheduler.*</code>, <code style="color:var(--warm-gold);">config.get/patch</code>, and more. See <code style="color:var(--warm-gold);">src/host/contract.rs</code> for the full protocol definition.
        </p>
      </div>

      <!-- Configuration -->
      <div class="docs-section" data-animate>
        <h3>Configuration</h3>
        <p style="color: var(--text-secondary); line-height: 1.75; margin-bottom: var(--space-lg);">
          Configuration lives in plain TOML at <code style="color:var(--warm-gold);">~/.config/fae/config.toml</code>:
        </p>

        <div class="code-block">
          <div class="code-block__label">config.toml</div>
<pre>[llm]
backend = "local"
context_size_tokens = 32768
max_history_messages = 24
tool_mode = "read_only"

[memory]
enabled = true
auto_capture = true
auto_recall = true
retention_days = 365

[intelligence]
enabled = false
proactivity_level = "gentle"
quiet_hours_start = 23
quiet_hours_end = 7

[conversation]
companion_presence = true</pre>
        </div>

        <p style="color: var(--text-secondary); line-height: 1.75; margin-top: var(--space-lg);">
          Context window defaults scale with system RAM: 8K tokens (&lt; 12 GiB), 16K (&lt; 20 GiB), 32K (&lt; 40 GiB), 64K (&ge; 40 GiB).
        </p>
      </div>

      <div class="divider"></div>

      <!-- Contributing -->
      <div class="docs-section" data-animate>
        <h3>Contributing</h3>
        <p style="color: var(--text-secondary); line-height: 1.75;">
          Fae is licensed under AGPL-3.0. Contributions are welcome — from bug reports and documentation improvements to new features and platform support. The best place to start is the <a href="https://github.com/saorsa-labs/fae" target="_blank" rel="noopener">GitHub repository</a>.
        </p>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section">
    <div class="container">
      <div class="cta-banner" data-animate>
        <h2>Start building with Fae</h2>
        <p class="lead">Clone the repo, build the core, and connect your own frontend.</p>
        <a href="https://github.com/saorsa-labs/fae" target="_blank" rel="noopener" class="btn btn--primary btn--large">
          View on GitHub
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer__grid">
        <div class="footer__brand">
          <div class="footer__brand-name">
            <img src="../img/fae-logo.png" alt="" class="nav__logo-orb" style="width:24px;height:24px;" aria-hidden="true">
            Saorsa Labs
          </div>
          <p class="footer__brand-text">Building Fae — a personal AI companion who listens, remembers, and helps. Private by design, open source by principle.</p>
          <p class="footer__brand-text" style="margin-top: var(--space-sm); font-size: 0.8rem; opacity: 0.7;">
            For Autonomi
          </p>
        </div>
        <div>
          <h5 class="footer__heading">Product</h5>
          <ul class="footer__links">
            <li><a href="features.html">Features</a></li>
            <li><a href="privacy.html">Privacy</a></li>
            <li><a href="getting-started.html">Getting Started</a></li>
            <li><a href="../index.html#waitlist">Early Access</a></li>
          </ul>
        </div>
        <div>
          <h5 class="footer__heading">Developers</h5>
          <ul class="footer__links">
            <li><a href="developers.html">Documentation</a></li>
            <li><a href="https://github.com/saorsa-labs/fae" target="_blank" rel="noopener">GitHub</a></li>
            <li><a href="developers.html#contributing">Contributing</a></li>
          </ul>
        </div>
        <div>
          <h5 class="footer__heading">Company</h5>
          <ul class="footer__links">
            <li><a href="about.html">About</a></li>
            <li><a href="mailto:hello@saorsalabs.com">Contact</a></li>
          </ul>
        </div>
      </div>
      <div class="footer__bottom">
        <span>&copy; 2026 Saorsa Labs. All rights reserved.</span>
        <div class="footer__bottom-links">
          <a href="privacy-policy.html">Privacy Policy</a>
          <a href="terms.html">Terms of Service</a>
        </div>
      </div>
    </div>
  </footer>

  <script src="../js/main.js"></script>
</body>
</html>
